<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hackaton ‚Äî –ü–æ–∏—Å–∫</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <nav class="navbar">
    <a href="{{ url_for('index.index_page') }}" class="brand">Legacy‚Ñ¢</a>
    <div class="nav-links">
      <a href="{{ url_for('index.index_page') }}">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="{{ url_for('search.search_page') }}">–ü–æ–∏—Å–∫</a>
    </div>
  </nav>

  <div class="container search-content">
    <h1>–ü–æ–∏—Å–∫ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º</h1>
    <form action="/search" method="get" class="search-form">
      <input type="text" name="q" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å..." required>
      <button type="submit" class="btn">üîç –ù–∞–π—Ç–∏</button>
    </form>

    {% if query %}
      <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è "{{ query }}":</h2>
      {% if results %}
      <div class="gallery">
        {% for result in results %}
        <div class="card">
          <a href="{{ url_for('result.result_page', id=result.id) }}">
            <img src="{{ url_for('static', filename='processed/' + result.processed_image) }}" alt="{{ result.original_filename }}" class="thumbnail">
          </a>
          <div class="card-info">
            <p>{{ result.original_filename }}</p>
            <a href="{{ url_for('static', filename='processed/' + result.processed_image) }}" class="btn" download>üì• –°–∫–∞—á–∞—Ç—å</a>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
        <p><em>–°–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</em></p>
      {% endif %}
    {% endif %}
  </div>

  <div id="imageModal" class="modal">
    <span class="close-btn">&times;</span>
    <img class="modal-content" id="modalImg" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
    <div id="modalCaption"></div>
  </div>

  <script>
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImg');
    const captionText = document.getElementById('modalCaption');
    const closeBtn = document.querySelector('.close-btn');

    document.querySelectorAll('.gallery .thumbnail').forEach(img => {
      img.addEventListener('click', () => {
        modal.style.display = 'block';
        modalImg.src = img.src;
        captionText.textContent = img.alt;
      });
    });

    closeBtn.onclick = () => {
      modal.style.display = 'none';
    };
  </script>
</body>
</html>
